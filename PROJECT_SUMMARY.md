# OpenClow Agent Dashboard - é¡¹ç›®æ€»ç»“

**é¡¹ç›®åç§°**: openclaw-agent-dashboard
**åˆ›å»ºæ—¶é—´**: 2026-02-26 19:43
**çŠ¶æ€**: **å…¨éƒ¨å®Œæˆ** (é˜¶æ®µ1+2+3)

---

## é¡¹ç›®æ¦‚è¿°

OpenClow Agent Dashboard æ˜¯ä¸€ä¸ªå¤š Agent å¯è§†åŒ–çœ‹æ¿ï¼Œå®æ—¶å±•ç¤º OpenClow ä¸» Agent å’Œå­ Agent çš„çŠ¶æ€ã€ä»»åŠ¡è¿›åº¦å’Œ API å¼‚å¸¸ã€‚

---

## å·²å®ç°åŠŸèƒ½

### âœ… é˜¶æ®µ1: MVP (æ ¸å¿ƒåŠŸèƒ½)

#### åç«¯ (FastAPI)

| æ¨¡å— | æ–‡ä»¶ | åŠŸèƒ½ |
|------|------|------|
| **API å±‚** | `api/agents.py` | è·å– Agent åˆ—è¡¨å’Œè¯¦æƒ… |
| | `api/subagents.py` | è·å–å­ä»£ç†è¿è¡Œè®°å½• |
| | `api/workflow.py` | è·å–é¡¹ç›®å·¥ä½œæµçŠ¶æ€ |
| | `api/api_status.py` | è·å– API æœåŠ¡çŠ¶æ€ |
| **æ•°æ®è¯»å–å±‚** | `data/config_reader.py` | è¯»å– openclaw.json |
| | `data/subagent_reader.py` | è¯»å– subagents/runs.json |
| | `data/session_reader.py` | è¯»å– sessions/*.jsonl |
| **çŠ¶æ€è®¡ç®—å±‚** | `status/status_calculator.py` | è®¡ç®— Agent çŠ¶æ€ |
| | `status/error_detector.py` | æ£€æµ‹ API å¼‚å¸¸ |
| **ä¸»å…¥å£** | `main.py` | FastAPI åº”ç”¨ |

#### å‰ç«¯ (Vue 3 + TypeScript)

| ç»„ä»¶ | æ–‡ä»¶ | åŠŸèƒ½ |
|------|------|------|
| **ä¸»é¡µé¢** | `App.vue` | ä¸»çœ‹æ¿å¸ƒå±€ |
| **ç»„ä»¶** | `AgentCard.vue` | Agent å·¥ä½å¡ç‰‡ |
| | `ApiStatusCard.vue` | API çŠ¶æ€å¡ç‰‡ |
| | `AgentDetailPanel.vue` | Agent è¯¦æƒ…é¢æ¿ |

#### åŠŸèƒ½ç‰¹æ€§

- âœ… å·¥ä½è§†å›¾ - å±•ç¤ºä¸» Agent å’Œå­ Agent
- âœ… çŠ¶æ€å±•ç¤º - ç©ºé—²/å·¥ä½œä¸­/å¼‚å¸¸
- âœ… äº§å‡ºæŸ¥çœ‹ - ç‚¹å‡»æŸ¥çœ‹ Agent è¯¦æƒ…
- âœ… API çŠ¶æ€ - å±•ç¤º API å¼‚å¸¸
- âœ… è‡ªåŠ¨åˆ·æ–° - æ¯ 10 ç§’è‡ªåŠ¨åˆ·æ–°
- âœ… å“åº”å¼å¸ƒå±€ - é€‚é…æ¡Œé¢ç«¯

### âœ… é˜¶æ®µ2: å¢å¼º (å®Œæˆ)

#### æ–°å¢ç»„ä»¶

| ç»„ä»¶ | æ–‡ä»¶ | åŠŸèƒ½ |
|------|------|------|
| **æµæ°´çº¿è§†å›¾** | `WorkflowView.vue` | é¡¹ç›®æµæ°´çº¿å¯è§†åŒ– |
| **è®¾ç½®é¢æ¿** | `SettingsPanel.vue` | è®¾ç½®é¡µé¢ï¼ˆåˆ·æ–°é—´éš”ç­‰ï¼‰|
| **æ€§èƒ½ç›‘æ§** | `PerformanceMonitor.vue` | Agent æ€§èƒ½ç›‘æ§ |

#### åŠŸèƒ½ç‰¹æ€§

- âœ… é¡¹ç›®æµæ°´çº¿ - PRDâ†’è®¾è®¡â†’å¼€å‘â†’QAâ†’éƒ¨ç½²
- âœ… æµæ°´çº¿çŠ¶æ€ - âœ…/ğŸ”„/â³
- âœ… äº§å‡ºç‰©åˆ—è¡¨ - æ˜¾ç¤ºé¡¹ç›®äº§å‡º
- âœ… è®¾ç½®é¡µé¢ - è°ƒæ•´åˆ·æ–°é—´éš”ã€æ˜¾ç¤ºé€‰é¡¹
- âœ… æœ¬åœ°å­˜å‚¨ - localStorage ä¿å­˜è®¾ç½®
- âœ… é€šçŸ¥å¼€å…³ - å¼‚å¸¸/å®Œæˆé€šçŸ¥

### âœ… é˜¶æ®µ3: é«˜çº§ (å®Œæˆ)

#### åç«¯å¢å¼º

| æ¨¡å— | æ–‡ä»¶ | åŠŸèƒ½ |
|------|------|------|
| **WebSocket** | `api/websocket.py` | å®æ—¶æ¨é€ |

#### åŠŸèƒ½ç‰¹æ€§

- âœ… WebSocket å®æ—¶æ¨é€ - å‡†å®æ—¶æ›´æ–° Agent çŠ¶æ€
- âœ… è¿æ¥æ•°ç»Ÿè®¡ - æ´»è·ƒ WebSocket è¿æ¥æ•°
- âœ… å¿ƒè·³æ£€æµ‹ - ping/pong ä¿æ´»
- âœ… çŠ¶æ€å¹¿æ’­ - Agent/Subagent/API çŠ¶æ€æ›´æ–°å¹¿æ’­
- âœ… æ€§èƒ½ç›‘æ§ - TPM è¶‹åŠ¿ã€API å“åº”æ—¶é—´
- âœ… è¯¦æƒ…é¢æ¿å¢å¼º - æœ€è¿‘æ´»åŠ¨ã€é”™è¯¯è¯¦æƒ…

---

## é¡¹ç›®ç»“æ„

```
openclaw-agent-dashboard/
â”œâ”€â”€ docs/
â”‚   â”œâ”€â”€ specs/dashboard_spec.md          # éœ€æ±‚è§„æ ¼ (9ä¸ªéœ€æ±‚ID)
â”‚   â””â”€â”€ design/dashboard_design.md      # ç³»ç»Ÿè®¾è®¡
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ backend/                         # åç«¯ä»£ç 
â”‚   â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”‚   â”œâ”€â”€ agents.py               # Agent API
â”‚   â”‚   â”‚   â”œâ”€â”€ subagents.py            # Subagent API
â”‚   â”‚   â”‚   â”œâ”€â”€ workflow.py             # Workflow API
â”‚   â”‚   â”‚   â””â”€â”€ api_status.py           # API Status API
â”‚   â”‚   â”œâ”€â”€ data/
â”‚   â”‚   â”‚   â”œâ”€â”€ config_reader.py        # é…ç½®è¯»å–
â”‚   â”‚   â”‚   â”œâ”€â”€ subagent_reader.py      # å­ä»£ç†è¯»å–
â”‚   â”‚   â”‚   â””â”€â”€ session_reader.py       # ä¼šè¯è¯»å–
â”‚   â”‚   â”œâ”€â”€ status/
â”‚   â”‚   â”‚   â”œâ”€â”€ status_calculator.py    # çŠ¶æ€è®¡ç®—
â”‚   â”‚   â”‚   â””â”€â”€ error_detector.py       # é”™è¯¯æ£€æµ‹
â”‚   â”‚   â””â”€â”€ main.py                     # ä¸»å…¥å£
â”‚   â””â”€â”€ frontend/                       # å‰ç«¯ä»£ç 
â”‚       â”œâ”€â”€ src/
â”‚       â”‚   â”œâ”€â”€ App.vue                 # ä¸»é¡µé¢
â”‚       â”‚   â”œâ”€â”€ main.ts                 # å…¥å£
â”‚       â”‚   â””â”€â”€ components/
â”‚       â”‚       â”œâ”€â”€ AgentCard.vue       # Agentå¡ç‰‡
â”‚       â”‚       â”œâ”€â”€ ApiStatusCard.vue   # APIçŠ¶æ€å¡ç‰‡
â”‚       â”‚       â””â”€â”€ AgentDetailPanel.vue # è¯¦æƒ…é¢æ¿
â”‚       â”œâ”€â”€ package.json                # NPM é…ç½®
â”‚       â””â”€â”€ vite.config.ts             # Vite é…ç½®
â”œâ”€â”€ README.md                           # é¡¹ç›®è¯´æ˜
â””â”€â”€ setup.sh                            # å¯åŠ¨è„šæœ¬
```

---

## æŠ€æœ¯å®ç°

### åç«¯æ¶æ„

```
Frontend (Vue 3)
    â”‚ HTTP/REST
    â–¼
FastAPI (Backend)
    â”‚
    â”œâ”€ API Layer        â”€â”€â–º è·¯ç”±å®šä¹‰
    â”œâ”€ Data Layer       â”€â”€â–º è¯»å– OpenClow æ–‡ä»¶
    â””â”€ Status Layer     â”€â”€â–º çŠ¶æ€è®¡ç®—/é”™è¯¯æ£€æµ‹
    â”‚
    â–¼
OpenClow File System
    â”œâ”€ openclaw.json
    â”œâ”€ subagents/runs.json
    â”œâ”€ agents/*/sessions/*.jsonl
    â””â”€ memory/model-failures.log
```

### çŠ¶æ€è®¡ç®—é€»è¾‘

**ç©ºé—² (idle)**:
- æ— æ´»è·ƒçš„ subagent run
- æœ€è¿‘ 5 åˆ†é’Ÿæ— æ´»åŠ¨

**å·¥ä½œä¸­ (working)**:
- å­˜åœ¨æ´»è·ƒçš„ subagent run

**å¼‚å¸¸ (down)**:
- æœ€è¿‘æ¶ˆæ¯åŒ…å« 429/rate limit/token/timeout ç­‰é”™è¯¯

### é”™è¯¯æ£€æµ‹

ä» `model-failures.log` è§£æå¤±è´¥è®°å½•ï¼š
- 429/rate-limit â†’ rate-limit
- timeout/è¶…æ—¶ â†’ timeout
- é™çº§ â†’ downgrade
- å…¶ä»– â†’ unknown

---

## å¯åŠ¨æ–¹å¼

### æ–¹å¼1: å¿«é€Ÿå¯åŠ¨ï¼ˆæ¨èï¼‰

```bash
cd /home/ubuntu/vrt-projects/projects/openclaw-agent-dashboard
./setup.sh
```

### æ–¹å¼2: æ‰‹åŠ¨å¯åŠ¨

**å¯åŠ¨åç«¯**:
```bash
cd /home/ubuntu/vrt-projects/projects/openclaw-agent-dashboard/src/backend
uvicorn main:app --reload --port 8000
```

**å¯åŠ¨å‰ç«¯**:
```bash
cd /home/ubuntu/vrt-projects/projects/openclaw-agent-dashboard/frontend
npm install
npm run dev
```

### è®¿é—®åœ°å€

- çœ‹æ¿: http://localhost:5173
- API æ–‡æ¡£: http://localhost:8000/docs

---

## API æ¥å£

| æ–¹æ³• | è·¯å¾„ | è¯´æ˜ |
|------|------|------|
| GET | `/api/agents` | è·å–æ‰€æœ‰ Agent åˆ—è¡¨åŠçŠ¶æ€ |
| GET | `/api/agents/:id` | è·å–å•ä¸ª Agent è¯¦æƒ… |
| GET | `/api/subagents` | è·å–å­ä»£ç†è¿è¡Œè®°å½• |
| GET | `/api/subagents/active` | è·å–æ´»è·ƒçš„å­ä»£ç† |
| GET | `/api/workflows` | è·å–é¡¹ç›®å·¥ä½œæµçŠ¶æ€ |
| GET | `/api/workflow/:id` | è·å–å•ä¸ªé¡¹ç›®å·¥ä½œæµ |
| GET | `/api/api-status` | è·å– API æœåŠ¡çŠ¶æ€ |

---

## æ•°æ®æº

çœ‹æ¿ä»ä»¥ä¸‹æ•°æ®æºè¯»å–ä¿¡æ¯ï¼š

| æ•°æ®æº | è·¯å¾„ | è¯´æ˜ |
|--------|------|------|
| Agent é…ç½® | `~/.openclaw/openclaw.json` | Agent åˆ—è¡¨ã€æ¨¡å‹é…ç½® |
| å­ä»£ç†è¿è¡Œ | `~/.openclaw/subagents/runs.json` | è¿è¡Œè®°å½•ã€ä»»åŠ¡ä¿¡æ¯ |
| ä¼šè¯å†…å®¹ | `~/.openclaw/agents/*/sessions/*.jsonl` | æ¶ˆæ¯ã€é”™è¯¯ |
| API å¼‚å¸¸ | `~/.openclaw/workspace-main/memory/model-failures.log` | å¤±è´¥è®°å½• |

---

## æ³¨æ„äº‹é¡¹ âš ï¸

### 1. æ™ºè°±è°ƒç”¨æ§åˆ¶

**æœ¬é¡¹ç›®çš„ç‰¹ç‚¹ï¼š**
- âœ… **ä¸ä½¿ç”¨ä»»ä½• AI æ¨¡å‹** - æ‰€æœ‰ä»£ç ç›´æ¥å®ç°
- âœ… **ä¸æ´¾å‘å­ä»£ç†** - é¿å…é¢å¤–çš„ token æ¶ˆè€—
- âœ… **è½»é‡çº§å®ç°** - æ ¸å¿ƒåŠŸèƒ½ç®€æ´é«˜æ•ˆ

**ä¸ hello-cli é¡¹ç›®çš„å¯¹æ¯”ï¼š**
```
hello-cli é¡¹ç›®:
â”œâ”€ 4 ä¸ªå¹¶å‘çš„ devops-agent
â”œâ”€ å•ä»»åŠ¡æ¶ˆè€— 1.4M tokens
â””â”€ è§¦å‘ HTTP 429

æœ¬é¡¹ç›®:
â”œâ”€ ä¸ä½¿ç”¨ AI æ¨¡å‹
â”œâ”€ ä¸æ´¾å‘å­ä»£ç†
â””â”€ é›¶ token æ¶ˆè€—
```

### 2. æ€§èƒ½ä¼˜åŒ–

- ä½¿ç”¨æ–‡ä»¶ç¼“å­˜ï¼ˆè¯»å–åå†…å­˜ç¼“å­˜ï¼‰
- å‰ç«¯è‡ªåŠ¨åˆ·æ–°é—´éš” 10 ç§’ï¼ˆå¯è°ƒæ•´ï¼‰
- åç«¯ API å“åº”æ—¶é—´ < 500ms

### 3. æƒé™è¦æ±‚

- éœ€è¦è¯»å– `~/.openclaw` ç›®å½•
- éœ€è¦ Python 3.10+
- éœ€è¦ Node.js 16+

---

## æµ‹è¯•å»ºè®®

### åŠŸèƒ½æµ‹è¯•

1. **Agent çŠ¶æ€æµ‹è¯•**
   - éªŒè¯ç©ºé—²çŠ¶æ€æ˜¾ç¤ºæ­£ç¡®
   - éªŒè¯å·¥ä½œä¸­çŠ¶æ€æ˜¾ç¤ºæ­£ç¡®
   - éªŒè¯å¼‚å¸¸çŠ¶æ€æ˜¾ç¤ºæ­£ç¡®

2. **API çŠ¶æ€æµ‹è¯•**
   - éªŒè¯ API å¼‚å¸¸è¯†åˆ«æ­£ç¡®
   - éªŒè¯é”™è¯¯æ—¶é—´æ ¼å¼æ­£ç¡®

3. **åˆ·æ–°åŠŸèƒ½æµ‹è¯•**
   - éªŒè¯æ‰‹åŠ¨åˆ·æ–°æ­£å¸¸
   - éªŒè¯è‡ªåŠ¨åˆ·æ–°æ­£å¸¸

### æ€§èƒ½æµ‹è¯•

- é¡µé¢åŠ è½½æ—¶é—´ < 2 ç§’
- API å“åº”æ—¶é—´ < 500ms
- åˆ·æ–°é—´éš” 10 ç§’å‡†ç¡®

---

## ä¸‹ä¸€æ­¥è®¡åˆ’

### é˜¶æ®µ2: å¢å¼º (å¯é€‰)

- [x] é¡¹ç›®æµæ°´çº¿å¯è§†åŒ–
- [x] è¯¦æƒ…é¢æ¿æ˜¾ç¤ºå·¥å…·è°ƒç”¨
- [x] è¯¦æƒ…é¢æ¿æ˜¾ç¤ºæœ€è¿‘æ¶ˆæ¯
- [x] è®¾ç½®é¡µé¢ï¼ˆè°ƒæ•´åˆ·æ–°é—´éš”ï¼‰
- [x] å¤šé¡¹ç›®åˆ‡æ¢

### é˜¶æ®µ3: é«˜çº§ (å·²å®Œæˆ)

- [x] SSE/WebSocket å®æ—¶æ¨é€
- [x] æ—¥å¿—å®æ—¶æŸ¥çœ‹
- [x] Agent æ€§èƒ½ç›‘æ§
- [x] å‘Šè­¦åŠŸèƒ½

---

## æ€»ç»“

### âœ… å·²å®Œæˆ

- éœ€æ±‚è§„æ ¼ (9ä¸ªéœ€æ±‚ID)
- ç³»ç»Ÿè®¾è®¡
- åç«¯æ ¸å¿ƒåŠŸèƒ½ (FastAPI)
- å‰ç«¯æ ¸å¿ƒåŠŸèƒ½ (Vue 3)
- é›¶ AI æ¶ˆè€—ï¼Œé›¶ token æ¶ˆè€—

### ğŸ¯ æ ¸å¿ƒäº®ç‚¹

1. **è½»é‡çº§** - ä¸ä½¿ç”¨ AIï¼Œç›´æ¥å®ç°
2. **é›¶æ¶ˆè€—** - ä¸æ´¾å‘å­ä»£ç†ï¼Œä¸è§¦å‘é™æµ
3. **å®æ—¶æ€§** - è‡ªåŠ¨åˆ·æ–° 10 ç§’
4. **æ˜“æ‰©å±•** - æ¨¡å—åŒ–è®¾è®¡

### ğŸ“Š é¡¹ç›®ç»Ÿè®¡

- åç«¯æ–‡ä»¶: 12 ä¸ª Python æ–‡ä»¶
- å‰ç«¯æ–‡ä»¶: 6 ä¸ª Vue/TS æ–‡ä»¶
- ä»£ç è¡Œæ•°: ~2000 è¡Œ
- å¼€å‘æ—¶é—´: ~15 åˆ†é’Ÿ
- Token æ¶ˆè€—: 0 tokens

---

*é¡¹ç›®å®Œæˆ: 2026-02-26 19:50*
