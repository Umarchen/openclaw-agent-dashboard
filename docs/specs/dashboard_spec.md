# OpenClaw Agent Dashboard - 需求规格说明书

**项目名称**: OpenClaw Agent Dashboard
**版本**: 1.0
**日期**: 2026-02-26

---

## 1. 项目概述

### 1.1 背景

OpenClaw 支持多 Agent 协作模式，但当前缺乏可视化看板，用户无法直观查看各 Agent 的实时状态和任务进度。

### 1.2 目标

提供一个轻量级的 Web 看板，实时展示主 Agent 和子 Agent 的状态、任务进度和 API 异常。

---

## 2. 核心需求

### [REQ_DASH_001] 工位视图

**优先级**: P0
**描述**: 以工位卡片形式展示主 Agent 和子 Agent
**验收标准**:
- 展示 Agent 名称、角色
- 显示状态灯（空闲/工作中/异常）
- 显示当前任务摘要（前50字符）
- 支持点击查看详情

### [REQ_DASH_002] 状态展示

**优先级**: P0
**描述**: 区分三种状态
**状态定义**:
- 🟢 空闲: 无活跃运行，5分钟无活动
- 🟡 工作中: 存在活跃的 subagent run
- 🔴 异常: 最近消息包含 429/rate limit/token/timeout 等错误

### [REQ_DASH_003] 产出查看

**优先级**: P0
**描述**: 点击工位查看 Agent 最近输出
**验收标准**:
- 显示最近会话摘要（最后5条消息）
- 显示工具调用列表
- 高亮显示错误信息

### [REQ_DASH_004] 项目流水线

**优先级**: P1
**描述**: 展示项目阶段和进度
**阶段**: PRD → 设计 → 开发 → QA → 部署
**验收标准**:
- 显示各阶段状态（✅/🔄/⏳）
- 从 .staging/workflow_state.json 读取

### [REQ_DASH_005] API 状态面板

**优先级**: P1
**描述**: 展示 API 服务异常
**验收标准**:
- 按 provider/model 展示
- 显示最近错误类型和时间
- TPM 估算

### [REQ_DASH_006] 数据读取

**优先级**: P0
**描述**: 从 OpenClaw 现有数据源读取
**数据源**:
- openclaw.json → Agent 配置
- ~/.openclaw/subagents/runs.json → 子代理运行
- agents/<id>/sessions/*.jsonl → 会话内容
- workspace-*/memory/model-failures.log → API 异常

### [REQ_DASH_007] 自动刷新

**优先级**: P1
**描述**: 支持自动轮询刷新
**默认间隔**: 10秒
**可配置**: 支持用户调整间隔

### [REQ_DASH_008] 响应式布局

**优先级**: P1
**描述**: 适配桌面端浏览器
**最小分辨率**: 1024x768

### [REQ_DASH_009] 技术栈

**优先级**: P0
**后端**: Python 3.10+, FastAPI
**前端**: Vue 3 + TypeScript
**集成方式**: 独立服务（读取 OpenClaw 文件系统）

---

## 3. 功能分解

### 阶段 1: MVP (必须)

- [REQ_DASH_001] 工位视图
- [REQ_DASH_002] 状态展示
- [REQ_DASH_003] 产出查看
- [REQ_DASH_006] 数据读取
- [REQ_DASH_009] 技术栈

### 阶段 2: 增强 (可选)

- [REQ_DASH_004] 项目流水线
- [REQ_DASH_005] API 状态面板
- [REQ_DASH_007] 自动刷新
- [REQ_DASH_008] 响应式布局

---

## 4. 非功能性需求

### 4.1 性能

- 页面加载时间 < 2秒
- 轮询响应时间 < 500ms

### 4.2 可靠性

- API 异常识别准确率 > 95%
- 状态更新延迟 < 10秒

### 4.3 可维护性

- 代码结构清晰，易于扩展
- 添加新 Agent 无需修改代码

---

## 5. 验收标准

### 必须满足

- [x] 能够展示主 Agent 与所有子 Agent 的工位列表
- [x] 每个工位正确显示状态（空闲/工作中/异常）
- [x] 点击工位可查看该 Agent 最近输出与错误
- [x] API 异常（429、超 token 等）能正确识别并展示

### 建议满足

- [x] 项目流水线可视化
- [x] 支持自动刷新
- [x] 响应式布局

---

*需求规格完成: 2026-02-26*
